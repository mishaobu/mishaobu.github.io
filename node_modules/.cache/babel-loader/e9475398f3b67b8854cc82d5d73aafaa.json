{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\flast\\\\OneDrive\\\\Desktop\\\\mishaobu com\\\\mishaobu.github.io\\\\src\\\\components\\\\FeedbackPage.js\";\nimport React, { Component } from 'react';\nimport './Form.css';\nimport config from '../config';\n\nconst firebase = require('firebase');\n\nclass Form extends Component {\n  constructor() {\n    super();\n    this.state = {\n      name: '',\n      description: '',\n      message: '',\n      private: null,\n      email: '',\n      time: null,\n      display: []\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  handleValidation() {\n    let errors = {};\n    let formIsValid = true; //Name\n\n    if (this.state.name === '') {\n      formIsValid = false;\n      alert(\"Name cannot be empty.\");\n      return formIsValid;\n    }\n\n    if (this.state.name.length < 6) {\n      formIsValid = false;\n      alert(\"Name must be longer than 5 letters.\");\n      return formIsValid;\n    }\n\n    if (this.state.name.length > 19) {\n      formIsValid = false;\n      alert(\"Name must be shorter than 20 letters.\");\n      return formIsValid;\n    } //Message\n\n\n    if (this.state.message === '') {\n      formIsValid = false;\n      alert(\"Message cannot be empty.\");\n      return formIsValid;\n    }\n\n    if (this.state.message.length < 15) {\n      formIsValid = false;\n      alert(\"Message must be longer than 15 characters.\");\n      return formIsValid;\n    }\n\n    if (this.state.message.length > 500) {\n      formIsValid = false;\n      alert(\"Message must be shorter than 500 characters.\");\n      return formIsValid;\n    } //Private\n\n\n    if (this.state.private === null) {\n      formIsValid = false;\n      alert(\"Choose whether message will be private or public.\");\n      return formIsValid;\n    }\n\n    return formIsValid;\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n\n    if (this.handleValidation()) {\n      const itemsRef = firebase.database().ref('messages');\n      const item = {\n        name: this.state.name,\n        description: this.state.description,\n        message: this.state.message,\n        private: this.state.private,\n        email: this.state.email,\n        time: Date(firebase.database.ServerValue.TIMESTAMP)\n      };\n      itemsRef.push(item);\n      this.setState({\n        name: '',\n        description: '',\n        message: '',\n        email: '',\n        time: null\n      });\n      alert(\"Form submitted\");\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"add-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 14\n      }\n    }, \" Enter Messages Here\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 18\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"name\",\n      placeholder: \"What's your name?\",\n      onChange: this.handleChange,\n      value: this.state.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 20\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"description\",\n      placeholder: \"Give a short description of yourself.\",\n      onChange: this.handleChange,\n      value: this.state.description,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 20\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"message\",\n      placeholder: \"What do you have to say?\",\n      onChange: this.handleChange,\n      value: this.state.message,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 20\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 20\n      }\n    }, \"Would you like your message to be private?\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"radio\",\n      id: \"yes\",\n      name: \"private\",\n      onChange: this.handleChange,\n      value: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 20\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"yes\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 20\n      }\n    }, \"Yes\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"radio\",\n      id: \"no\",\n      name: \"private\",\n      onChange: this.handleChange,\n      value: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"no\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 8\n      }\n    }, \"No\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"email\",\n      name: \"email\",\n      placeholder: \"If you want to be contacted, what's your email?\",\n      onChange: this.handleChange,\n      value: this.state.email,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 20\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 20\n      }\n    }, \"Send Message\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"display-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"entry\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }\n    }, this.state.display.map(item => {\n      if (item.private === \"false\") {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          key: item.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 16\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 17\n          }\n        }, item.time), /*#__PURE__*/React.createElement(\"h3\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 18\n          }\n        }, item.name), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 15\n          }\n        }, item.description), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 18\n          }\n        }, \"Message: \", item.message));\n      }\n    }))))));\n  }\n\n  componentDidMount() {\n    firebase.initializeApp(config);\n    let ref = firebase.database().ref('messages');\n    ref.on('value', snapshot => {\n      let newState = [];\n      const data = snapshot.val();\n\n      for (let item in data) {\n        newState.push({\n          id: item,\n          name: data[item].name,\n          description: data[item].description,\n          message: data[item].message,\n          private: data[item].private,\n          email: data[item].email,\n          time: data[item].time\n        });\n      }\n\n      this.setState({\n        display: newState\n      });\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    //only call set state here if it is wrapped in a condition\n    //if you initialize this.state.shouldUpdate and have not changed it yet then this will not run\n    if (this.state.shouldUpdate !== prevState.shouldUpdate) {//same code as above to retrieve the data \n    }\n  }\n\n}\n\nexport default Form;","map":{"version":3,"sources":["C:/Users/flast/OneDrive/Desktop/mishaobu com/mishaobu.github.io/src/components/FeedbackPage.js"],"names":["React","Component","config","firebase","require","Form","constructor","state","name","description","message","private","email","time","display","handleChange","bind","handleSubmit","e","setState","target","value","handleValidation","errors","formIsValid","alert","length","preventDefault","itemsRef","database","ref","item","Date","ServerValue","TIMESTAMP","push","render","map","id","componentDidMount","initializeApp","on","snapshot","newState","data","val","componentDidUpdate","prevProps","prevState","shouldUpdate"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,YAAP;AACA,OAAOC,MAAP,MAAmB,WAAnB;;AAEA,MAAMC,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AAEA,MAAMC,IAAN,SAAmBJ,SAAnB,CAA6B;AAC5BK,EAAAA,WAAW,GAAG;AACV;AACA,SAAKC,KAAL,GAAa;AACZC,MAAAA,IAAI,EAAE,EADM;AAEZC,MAAAA,WAAW,EAAE,EAFD;AAGZC,MAAAA,OAAO,EAAE,EAHG;AAIZC,MAAAA,OAAO,EAAE,IAJG;AAKZC,MAAAA,KAAK,EAAE,EALK;AAMZC,MAAAA,IAAI,EAAE,IANM;AAOZC,MAAAA,OAAO,EAAE;AAPG,KAAb;AASA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBD,IAAlB,CAAuB,IAAvB,CAApB;AACD;;AAEHD,EAAAA,YAAY,CAACG,CAAD,EAAI;AACf,SAAKC,QAAL,CAAc;AACb,OAACD,CAAC,CAACE,MAAF,CAASZ,IAAV,GAAiBU,CAAC,CAACE,MAAF,CAASC;AADb,KAAd;AAGA;;AAEDC,EAAAA,gBAAgB,GAAE;AACX,QAAIC,MAAM,GAAG,EAAb;AACA,QAAIC,WAAW,GAAG,IAAlB,CAFW,CAIX;;AACA,QAAG,KAAKjB,KAAL,CAAWC,IAAX,KAAoB,EAAvB,EAA0B;AACvBgB,MAAAA,WAAW,GAAG,KAAd;AACAC,MAAAA,KAAK,CAAC,uBAAD,CAAL;AACA,aAAOD,WAAP;AACF;;AAED,QAAG,KAAKjB,KAAL,CAAWC,IAAX,CAAgBkB,MAAhB,GAAyB,CAA5B,EAA8B;AAC1BF,MAAAA,WAAW,GAAG,KAAd;AACAC,MAAAA,KAAK,CAAC,qCAAD,CAAL;AACA,aAAOD,WAAP;AACH;;AAED,QAAG,KAAKjB,KAAL,CAAWC,IAAX,CAAgBkB,MAAhB,GAAyB,EAA5B,EAA+B;AAC3BF,MAAAA,WAAW,GAAG,KAAd;AACAC,MAAAA,KAAK,CAAC,uCAAD,CAAL;AACA,aAAOD,WAAP;AACH,KArBU,CAuBX;;;AACA,QAAG,KAAKjB,KAAL,CAAWG,OAAX,KAAuB,EAA1B,EAA6B;AAC1Bc,MAAAA,WAAW,GAAG,KAAd;AACAC,MAAAA,KAAK,CAAC,0BAAD,CAAL;AACA,aAAOD,WAAP;AACF;;AAED,QAAG,KAAKjB,KAAL,CAAWG,OAAX,CAAmBgB,MAAnB,GAA4B,EAA/B,EAAkC;AAC9BF,MAAAA,WAAW,GAAG,KAAd;AACAC,MAAAA,KAAK,CAAC,4CAAD,CAAL;AACA,aAAOD,WAAP;AACH;;AAED,QAAG,KAAKjB,KAAL,CAAWG,OAAX,CAAmBgB,MAAnB,GAA4B,GAA/B,EAAmC;AAC/BF,MAAAA,WAAW,GAAG,KAAd;AACAC,MAAAA,KAAK,CAAC,8CAAD,CAAL;AACA,aAAOD,WAAP;AACH,KAxCU,CA0CX;;;AACA,QAAG,KAAKjB,KAAL,CAAWI,OAAX,KAAuB,IAA1B,EAAgC;AAC/Ba,MAAAA,WAAW,GAAG,KAAd;AACAC,MAAAA,KAAK,CAAC,mDAAD,CAAL;AACA,aAAOD,WAAP;AACA;;AAEF,WAAOA,WAAP;AACH;;AAEHP,EAAAA,YAAY,CAACC,CAAD,EAAI;AACfA,IAAAA,CAAC,CAACS,cAAF;;AACC,QAAG,KAAKL,gBAAL,EAAH,EAA2B;AAC1B,YAAMM,QAAQ,GAAGzB,QAAQ,CAAC0B,QAAT,GAAoBC,GAApB,CAAwB,UAAxB,CAAjB;AACA,YAAMC,IAAI,GAAG;AACXvB,QAAAA,IAAI,EAAE,KAAKD,KAAL,CAAWC,IADN;AAEXC,QAAAA,WAAW,EAAE,KAAKF,KAAL,CAAWE,WAFb;AAGXC,QAAAA,OAAO,EAAE,KAAKH,KAAL,CAAWG,OAHT;AAIXC,QAAAA,OAAO,EAAE,KAAKJ,KAAL,CAAWI,OAJT;AAKXC,QAAAA,KAAK,EAAE,KAAKL,KAAL,CAAWK,KALP;AAMXC,QAAAA,IAAI,EAAGmB,IAAI,CAAC7B,QAAQ,CAAC0B,QAAT,CAAkBI,WAAlB,CAA8BC,SAA/B;AANA,OAAb;AAQAN,MAAAA,QAAQ,CAACO,IAAT,CAAcJ,IAAd;AACA,WAAKZ,QAAL,CAAc;AACZX,QAAAA,IAAI,EAAE,EADM;AAEfC,QAAAA,WAAW,EAAE,EAFE;AAGfC,QAAAA,OAAO,EAAE,EAHM;AAIfE,QAAAA,KAAK,EAAE,EAJQ;AAKfC,QAAAA,IAAI,EAAC;AALU,OAAd;AAOOY,MAAAA,KAAK,CAAC,gBAAD,CAAL;AACF;AACP;;AAECW,EAAAA,MAAM,GAAG;AACP,wBACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACG;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAI,MAAA,KAAK,EAAC,QAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADD,eAEK;AAAM,MAAA,QAAQ,EAAE,KAAKnB,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,IAAI,EAAC,MAAxB;AAA+B,MAAA,WAAW,EAAC,mBAA3C;AAA+D,MAAA,QAAQ,EAAE,KAAKF,YAA9E;AAA4F,MAAA,KAAK,EAAE,KAAKR,KAAL,CAAWC,IAA9G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,IAAI,EAAC,aAAxB;AAAsC,MAAA,WAAW,EAAC,uCAAlD;AAA0F,MAAA,QAAQ,EAAE,KAAKO,YAAzG;AAAuH,MAAA,KAAK,EAAE,KAAKR,KAAL,CAAWE,WAAzI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,eAGE;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,IAAI,EAAC,SAAxB;AAAkC,MAAA,WAAW,EAAC,0BAA9C;AAAyE,MAAA,QAAQ,EAAE,KAAKM,YAAxF;AAAsG,MAAA,KAAK,EAAE,KAAKR,KAAL,CAAWG,OAAxH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDAJF,eAKE;AAAO,MAAA,IAAI,EAAC,OAAZ;AAAoB,MAAA,EAAE,EAAC,KAAvB;AAA6B,MAAA,IAAI,EAAC,SAAlC;AAA4C,MAAA,QAAQ,EAAE,KAAKK,YAA3D;AAAyE,MAAA,KAAK,EAAE,IAAhF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALF,eAME;AAAO,MAAA,GAAG,EAAC,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aANF,eAOV;AAAO,MAAA,IAAI,EAAC,OAAZ;AAAoB,MAAA,EAAE,EAAC,IAAvB;AAA4B,MAAA,IAAI,EAAC,SAAjC;AAA2C,MAAA,QAAQ,EAAE,KAAKA,YAA1D;AAAwE,MAAA,KAAK,EAAE,KAA/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPU,eAQV;AAAO,MAAA,GAAG,EAAC,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YARU,eASE;AAAO,MAAA,IAAI,EAAC,OAAZ;AAAoB,MAAA,IAAI,EAAC,OAAzB;AAAiC,MAAA,WAAW,EAAC,iDAA7C;AAA+F,MAAA,QAAQ,EAAE,KAAKA,YAA9G;AAA4H,MAAA,KAAK,EAAE,KAAKR,KAAL,CAAWK,KAA9I;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATF,eAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAVF,CAFL,CADH,eAgBE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACG;AAAI,MAAA,SAAS,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,KAAKL,KAAL,CAAWO,OAAX,CAAmBuB,GAAnB,CAAwBN,IAAD,IAAU;AACjC,UAAIA,IAAI,CAACpB,OAAL,KAAiB,OAArB,EAA8B;AACnC,4BACE;AAAI,UAAA,GAAG,EAAEoB,IAAI,CAACO,EAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAIP,IAAI,CAAClB,IAAT,CADD,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAKkB,IAAI,CAACvB,IAAV,CAFF,eAGD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAIuB,IAAI,CAACtB,WAAT,CAHC,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAasB,IAAI,CAACrB,OAAlB,CAJF,CADF;AAQD;AAAC,KAVK,CADF,CADH,CADF,CAhBF,CADF,CADF;AAsCF;;AACD6B,EAAAA,iBAAiB,GAAG;AACnBpC,IAAAA,QAAQ,CAACqC,aAAT,CAAuBtC,MAAvB;AACA,QAAI4B,GAAG,GAAG3B,QAAQ,CAAC0B,QAAT,GAAoBC,GAApB,CAAwB,UAAxB,CAAV;AACAA,IAAAA,GAAG,CAACW,EAAJ,CAAO,OAAP,EAAgBC,QAAQ,IAAI;AAC3B,UAAIC,QAAQ,GAAC,EAAb;AACA,YAAMC,IAAI,GAAGF,QAAQ,CAACG,GAAT,EAAb;;AACA,WAAK,IAAId,IAAT,IAAiBa,IAAjB,EAAuB;AACtBD,QAAAA,QAAQ,CAACR,IAAT,CAAc;AACTG,UAAAA,EAAE,EAAEP,IADK;AAETvB,UAAAA,IAAI,EAAEoC,IAAI,CAACb,IAAD,CAAJ,CAAWvB,IAFR;AAGTC,UAAAA,WAAW,EAAEmC,IAAI,CAACb,IAAD,CAAJ,CAAWtB,WAHf;AAITC,UAAAA,OAAO,EAAEkC,IAAI,CAACb,IAAD,CAAJ,CAAWrB,OAJX;AAKTC,UAAAA,OAAO,EAAEiC,IAAI,CAACb,IAAD,CAAJ,CAAWpB,OALX;AAMTC,UAAAA,KAAK,EAAEgC,IAAI,CAACb,IAAD,CAAJ,CAAWnB,KANT;AAOTC,UAAAA,IAAI,EAAE+B,IAAI,CAACb,IAAD,CAAJ,CAAWlB;AAPR,SAAd;AASA;;AACF,WAAKM,QAAL,CAAc;AACbL,QAAAA,OAAO,EAAE6B;AADI,OAAd;AAGA,KAjBA;AAkBF;;AAECG,EAAAA,kBAAkB,CAACC,SAAD,EAAYC,SAAZ,EAAuBN,QAAvB,EAAgC;AAChD;AACA;AACA,QAAG,KAAKnC,KAAL,CAAW0C,YAAX,KAA4BD,SAAS,CAACC,YAAzC,EAAsD,CACpD;AACD;AACF;;AAvK0B;;AAyK7B,eAAe5C,IAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport './Form.css'\r\nimport config from '../config'\r\n\r\nconst firebase = require('firebase')\r\n\r\nclass Form extends Component {\r\n\tconstructor() {\r\n\t    super();\r\n\t    this.state = {\r\n\t\t    name: '',\r\n\t\t    description: '',\r\n\t\t    message: '',\r\n\t\t    private: null,\r\n\t\t    email: '',\r\n\t\t    time: null,\r\n\t\t    display: []\r\n\t    }\r\n\t    this.handleChange = this.handleChange.bind(this);\r\n\t    this.handleSubmit = this.handleSubmit.bind(this);\r\n\t  }\r\n\r\n\thandleChange(e) {\r\n\t\tthis.setState({\r\n\t\t\t[e.target.name]: e.target.value\r\n\t\t});\r\n\t}\r\n\r\n\thandleValidation(){\r\n        let errors = {};\r\n        let formIsValid = true;\r\n\r\n        //Name\r\n        if(this.state.name === ''){\r\n           formIsValid = false;\r\n           alert(\"Name cannot be empty.\");\r\n           return formIsValid;\r\n        }\r\n\r\n        if(this.state.name.length < 6){\r\n            formIsValid = false;\r\n            alert(\"Name must be longer than 5 letters.\");\r\n            return formIsValid;\r\n        }\r\n\r\n        if(this.state.name.length > 19){\r\n            formIsValid = false;\r\n            alert(\"Name must be shorter than 20 letters.\");\r\n            return formIsValid;\r\n        }\r\n\r\n        //Message\r\n        if(this.state.message === ''){\r\n           formIsValid = false;\r\n           alert(\"Message cannot be empty.\");\r\n           return formIsValid;\r\n        }\r\n\r\n        if(this.state.message.length < 15){\r\n            formIsValid = false;\r\n            alert(\"Message must be longer than 15 characters.\");\r\n            return formIsValid;\r\n        }\r\n\r\n        if(this.state.message.length > 500){\r\n            formIsValid = false;\r\n            alert(\"Message must be shorter than 500 characters.\");\r\n            return formIsValid;\r\n        }\r\n\r\n        //Private\r\n        if(this.state.private === null) {\r\n        \tformIsValid = false;\r\n        \talert(\"Choose whether message will be private or public.\")\r\n        \treturn formIsValid;\r\n        }\r\n\r\n       return formIsValid;\r\n   }\r\n\r\n\thandleSubmit(e) {\r\n\t\te.preventDefault()\r\n\t  if(this.handleValidation()){\r\n\t  \tconst itemsRef = firebase.database().ref('messages');\r\n\t\t  const item = {\r\n\t\t    name: this.state.name,\r\n\t\t    description: this.state.description,\r\n\t\t    message: this.state.message,\r\n\t\t    private: this.state.private,\r\n\t\t    email: this.state.email,\r\n\t\t    time:  Date(firebase.database.ServerValue.TIMESTAMP)\r\n\t\t  }\r\n\t\t  itemsRef.push(item);\r\n\t\t  this.setState({\r\n\t\t    name: '',\r\n\t\t\tdescription: '',\r\n\t\t\tmessage: '',\r\n\t\t\temail: '',\r\n\t\t\ttime:null\r\n\t\t  });\r\n           alert(\"Form submitted\");\r\n        } \r\n\t}\r\n\r\n  \trender() {\r\n    \treturn (\r\n      \t<div className='app'>\r\n        \t<div className='container'>\r\n\t          \t<div className='add-item'>\r\n\t          \t\t<h2 align='center'> Enter Messages Here</h2>\r\n\t              \t\t<form onSubmit={this.handleSubmit}>\r\n\t\t\t                <input type=\"text\" name=\"name\" placeholder=\"What's your name?\" onChange={this.handleChange} value={this.state.name}/>\r\n\t\t\t                <input type=\"text\" name=\"description\" placeholder=\"Give a short description of yourself.\" onChange={this.handleChange} value={this.state.description}/>\r\n\t\t\t                <input type=\"text\" name=\"message\" placeholder=\"What do you have to say?\" onChange={this.handleChange} value={this.state.message}/>\r\n\t\t\t                <p>Would you like your message to be private?</p>\r\n\t\t\t                <input type=\"radio\" id=\"yes\" name=\"private\" onChange={this.handleChange} value={true}/>\r\n\t\t\t                <label for=\"yes\">Yes</label>\r\n\t\t\t\t\t\t\t<input type=\"radio\" id=\"no\" name=\"private\" onChange={this.handleChange} value={false}/>\r\n\t\t\t\t\t\t\t<label for=\"no\">No</label>\r\n\t\t\t                <input type=\"email\" name=\"email\" placeholder=\"If you want to be contacted, what's your email?\" onChange={this.handleChange} value={this.state.email} />\r\n\t\t\t                <button>Send Message</button>\r\n\t              \t\t</form>\r\n\t          \t</div>\r\n          \t<div className='display-item'>\r\n            \t<div className='wrapper'>\r\n              \t\t<ul className='entry'>\r\n\t              \t\t{this.state.display.map((item) => {\r\n\t              \t\t\tif (item.private === \"false\") {\r\n\t\t\t\t\t        return (\r\n\t\t\t\t\t          <li key={item.id}>\r\n\t\t\t\t\t          \t<p>{item.time}</p>\r\n\t\t\t\t\t            <h3>{item.name}</h3>\r\n\t\t\t\t\t\t        <p>{item.description}</p>\r\n\t\t\t\t\t            <p>Message: {item.message}</p>\r\n\t\t\t\t\t          </li>\r\n\t\t\t\t\t        )\r\n\t\t\t\t\t      }})}\r\n              \t\t</ul>\r\n            \t</div>\r\n          \t</div>\r\n        \t</div>\r\n      \t</div>\r\n    );\r\n  }\r\n  componentDidMount() {\r\n  \tfirebase.initializeApp(config)\r\n  \tlet ref = firebase.database().ref('messages')\r\n  \tref.on('value', snapshot => {\r\n  \t\tlet newState=[];\r\n  \t\tconst data = snapshot.val()\r\n\t  \tfor (let item in data) {\r\n\t  \t\tnewState.push({\r\n\t\t        id: item,\r\n\t\t        name: data[item].name,\r\n\t\t        description: data[item].description,\r\n\t\t        message: data[item].message,\r\n\t\t        private: data[item].private,\r\n\t\t        email: data[item].email,\r\n\t\t        time: data[item].time\r\n\t\t      });\r\n\t  \t}\r\n  \tthis.setState({\r\n  \t\tdisplay: newState\r\n  \t});\r\n  });\r\n}\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot){\r\n    //only call set state here if it is wrapped in a condition\r\n    //if you initialize this.state.shouldUpdate and have not changed it yet then this will not run\r\n    if(this.state.shouldUpdate !== prevState.shouldUpdate){\r\n      //same code as above to retrieve the data \r\n    }\r\n  }\r\n}\r\nexport default Form;"]},"metadata":{},"sourceType":"module"}